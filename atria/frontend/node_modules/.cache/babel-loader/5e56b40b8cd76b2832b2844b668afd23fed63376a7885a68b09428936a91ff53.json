{"ast":null,"code":"import HttpService from \"./http.service\";\nexport const setupAxiosInterceptors = onUnauthenticated => {\n  const onRequestSuccess = async config => {\n    const token = localStorage.getItem(\"token\");\n    config.headers.Authorization = `Bearer ${token}`;\n    return config;\n  };\n  const onRequestFail = error => Promise.reject(error);\n  HttpService.addRequestInterceptor(onRequestSuccess, onRequestFail);\n  const onResponseSuccess = response => response;\n  const onResponseFail = error => {\n    const status = error.status || error.response.status;\n    if (status === 403 || status === 401) {\n      onUnauthenticated();\n    }\n    return Promise.reject(error);\n  };\n  HttpService.addResponseInterceptor(onResponseSuccess, onResponseFail);\n};","map":{"version":3,"names":["HttpService","setupAxiosInterceptors","onUnauthenticated","onRequestSuccess","config","token","localStorage","getItem","headers","Authorization","onRequestFail","error","Promise","reject","addRequestInterceptor","onResponseSuccess","response","onResponseFail","status","addResponseInterceptor"],"sources":["/home/atria/public_html/f1.atria.live/atria/frontend/src/services/interceptor.js"],"sourcesContent":["import HttpService from \"./http.service\";\n\nexport const setupAxiosInterceptors = (onUnauthenticated) => {\n  const onRequestSuccess = async (config) => {\n    const token = localStorage.getItem(\"token\");\n    config.headers.Authorization = `Bearer ${token}`;\n    return config;\n  };\n  const onRequestFail = (error) => Promise.reject(error);\n\n  HttpService.addRequestInterceptor(onRequestSuccess, onRequestFail);\n\n  const onResponseSuccess = (response) => response;\n\n  const onResponseFail = (error) => {\n    const status = error.status || error.response.status;\n    if (status === 403 || status === 401) {\n      onUnauthenticated();\n    }\n\n    return Promise.reject(error);\n  };\n  HttpService.addResponseInterceptor(onResponseSuccess, onResponseFail);\n};\n"],"mappings":"AAAA,OAAOA,WAAW,MAAM,gBAAgB;AAExC,OAAO,MAAMC,sBAAsB,GAAIC,iBAAiB,IAAK;EAC3D,MAAMC,gBAAgB,GAAG,MAAOC,MAAM,IAAK;IACzC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3CH,MAAM,CAACI,OAAO,CAACC,aAAa,GAAI,UAASJ,KAAM,EAAC;IAChD,OAAOD,MAAM;EACf,CAAC;EACD,MAAMM,aAAa,GAAIC,KAAK,IAAKC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;EAEtDX,WAAW,CAACc,qBAAqB,CAACX,gBAAgB,EAAEO,aAAa,CAAC;EAElE,MAAMK,iBAAiB,GAAIC,QAAQ,IAAKA,QAAQ;EAEhD,MAAMC,cAAc,GAAIN,KAAK,IAAK;IAChC,MAAMO,MAAM,GAAGP,KAAK,CAACO,MAAM,IAAIP,KAAK,CAACK,QAAQ,CAACE,MAAM;IACpD,IAAIA,MAAM,KAAK,GAAG,IAAIA,MAAM,KAAK,GAAG,EAAE;MACpChB,iBAAiB,CAAC,CAAC;IACrB;IAEA,OAAOU,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;EAC9B,CAAC;EACDX,WAAW,CAACmB,sBAAsB,CAACJ,iBAAiB,EAAEE,cAAc,CAAC;AACvE,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}