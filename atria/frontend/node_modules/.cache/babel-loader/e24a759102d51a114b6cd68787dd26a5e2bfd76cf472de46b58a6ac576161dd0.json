{"ast":null,"code":"import _regeneratorRuntime from\"/home/atria/public_html/f1.atria.live/atria/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/atria/public_html/f1.atria.live/atria/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/atria/public_html/f1.atria.live/atria/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/atria/public_html/f1.atria.live/atria/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/atria/public_html/f1.atria.live/atria/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/**\n=========================================================\n* Material Dashboard 2 PRO React - v2.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/material-dashboard-pro-react\n* Copyright 2022 Creative Tim (https://www.creative-tim.com)\n\nCoded by www.creative-tim.com\n\n =========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n*/import{useEffect,useState}from\"react\";// @material-ui core components\nimport Card from\"@mui/material/Card\";import Grid from\"@mui/material/Grid\";// Material Dashboard 2 PRO React components\nimport MDBox from\"components/MDBox\";import MDTypography from\"components/MDTypography\";import MDButton from\"components/MDButton\";import MDAlert from\"components/MDAlert\";// Settings page components\nimport FormField from\"layouts/pages/account/components/FormField\";import AuthService from\"services/auth-service\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function BasicInfo(_ref){var user=_ref.user,isDemo=_ref.isDemo;var _useState=useState({name:\"\",email:\"\"}),_useState2=_slicedToArray(_useState,2),info=_useState2[0],setInfo=_useState2[1];var _useState3=useState({value:false,color:\"info\",message:\"\"}),_useState4=_slicedToArray(_useState3,2),notification=_useState4[0],setNotification=_useState4[1];useEffect(function(){setInfo({name:user.name,email:user.email});},[user]);useEffect(function(){if(notification.value===true){var timer=setTimeout(function(){setNotification({value:false,color:\"info\",message:\"\"});},5000);}},[notification]);var _useState5=useState({nameError:false,emailError:false}),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var changeHandler=function changeHandler(e){setInfo(_objectSpread(_objectSpread({},info),{},_defineProperty({},e.target.name,e.target.value)));};var submitHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var mailFormat,userData,_user$profile_image,_user$profile_image2;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();// validation\nmailFormat=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(!(info.name.trim().length===0)){_context.next=5;break;}setErrors(_objectSpread(_objectSpread({},errors),{},{nameError:true}));return _context.abrupt(\"return\");case 5:if(!(info.email.trim().length===0||!info.email.trim().match(mailFormat))){_context.next=8;break;}setErrors(_objectSpread(_objectSpread({},errors),{},{emailError:true}));return _context.abrupt(\"return\");case 8:if(isDemo){userData={data:{type:\"profile\",attributes:{name:info.name,profile_image:(_user$profile_image=user.profile_image)!==null&&_user$profile_image!==void 0?_user$profile_image:null}}};}else{userData={data:{type:\"profile\",attributes:{name:info.name,email:info.email,profile_image:(_user$profile_image2=user.profile_image)!==null&&_user$profile_image2!==void 0?_user$profile_image2:null}}};}// call api for update\n_context.next=11;return AuthService.updateProfile(JSON.stringify(userData));case 11:// reset errors\nsetErrors({nameError:false,emailError:false});setNotification({value:true,color:isDemo?\"secondary\":\"info\",message:isDemo?\"You can not update the email in demo version\":\"Your profile has been updated\"});case 13:case\"end\":return _context.stop();}},_callee);}));return function submitHandler(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Card,{id:\"basic-info\",sx:{overflow:\"visible\"},children:[/*#__PURE__*/_jsx(MDBox,{p:3,children:/*#__PURE__*/_jsx(MDTypography,{variant:\"h5\",children:\"Basic Info\"})}),/*#__PURE__*/_jsxs(MDBox,{component:\"form\",pb:3,px:3,method:\"POST\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(FormField,{label:\"First Name\",placeholder:\"Alec\",name:\"name\",value:info.name,onChange:changeHandler,error:errors.nameError})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(FormField,{label:\"Email\",placeholder:\"example@email.com\",inputProps:{type:\"email\"},name:\"email\",value:info.email,onChange:changeHandler,error:errors.emailError})})]}),/*#__PURE__*/_jsx(MDBox,{ml:\"auto\",mt:2,display:\"flex\",justifyContent:\"flex-end\",children:/*#__PURE__*/_jsx(MDButton,{variant:\"gradient\",color:\"dark\",size:\"small\",type:\"submit\",children:\"update\"})})]})]}),notification.value===true&&/*#__PURE__*/_jsx(MDAlert,{color:notification.color,mt:\"20px\",children:/*#__PURE__*/_jsx(MDTypography,{variant:\"body2\",color:\"white\",children:notification.message})})]});}export default BasicInfo;","map":{"version":3,"names":["useEffect","useState","Card","Grid","MDBox","MDTypography","MDButton","MDAlert","FormField","AuthService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BasicInfo","_ref","user","isDemo","_useState","name","email","_useState2","_slicedToArray","info","setInfo","_useState3","value","color","message","_useState4","notification","setNotification","timer","setTimeout","_useState5","nameError","emailError","_useState6","errors","setErrors","changeHandler","e","_objectSpread","_defineProperty","target","submitHandler","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","mailFormat","userData","_user$profile_image","_user$profile_image2","wrap","_callee$","_context","prev","next","preventDefault","trim","length","abrupt","match","data","type","attributes","profile_image","updateProfile","JSON","stringify","stop","_x","apply","arguments","children","id","sx","overflow","p","variant","component","pb","px","method","onSubmit","container","spacing","item","xs","sm","label","placeholder","onChange","error","inputProps","ml","mt","display","justifyContent","size"],"sources":["/home/atria/public_html/f1.atria.live/atria/frontend/src/cruds/user-profile/components/BasicInfo/index.js"],"sourcesContent":["/**\n=========================================================\n* Material Dashboard 2 PRO React - v2.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/material-dashboard-pro-react\n* Copyright 2022 Creative Tim (https://www.creative-tim.com)\n\nCoded by www.creative-tim.com\n\n =========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n*/\n\nimport { useEffect, useState } from \"react\";\n\n// @material-ui core components\nimport Card from \"@mui/material/Card\";\nimport Grid from \"@mui/material/Grid\";\n\n// Material Dashboard 2 PRO React components\nimport MDBox from \"components/MDBox\";\nimport MDTypography from \"components/MDTypography\";\nimport MDButton from \"components/MDButton\";\nimport MDAlert from \"components/MDAlert\";\n\n// Settings page components\nimport FormField from \"layouts/pages/account/components/FormField\";\n\nimport AuthService from \"services/auth-service\";\n\nfunction BasicInfo({ user, isDemo }) {\n  const [info, setInfo] = useState({ name: \"\", email: \"\" });\n  const [notification, setNotification] = useState({ value: false, color: \"info\", message: \"\" });\n\n  useEffect(() => {\n    setInfo({\n      name: user.name,\n      email: user.email,\n    });\n  }, [user]);\n\n  useEffect(() => {\n    if (notification.value === true) {\n      let timer = setTimeout(() => {\n        setNotification({ value: false, color: \"info\", message: \"\" });\n      }, 5000);\n    }\n  }, [notification]);\n\n  const [errors, setErrors] = useState({\n    nameError: false,\n    emailError: false,\n  });\n\n  const changeHandler = (e) => {\n    setInfo({\n      ...info,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const submitHandler = async (e) => {\n    e.preventDefault();\n\n    // validation\n    const mailFormat = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\n    if (info.name.trim().length === 0) {\n      setErrors({ ...errors, nameError: true });\n      return;\n    }\n\n    if (info.email.trim().length === 0 || !info.email.trim().match(mailFormat)) {\n      setErrors({ ...errors, emailError: true });\n      return;\n    }\n\n    // set new user data for call\n    let userData;\n    if (isDemo) {\n      userData = {\n        data: {\n          type: \"profile\",\n          attributes: {\n            name: info.name,\n            profile_image: user.profile_image ?? null,\n          },\n        },\n      };\n    } else {\n      userData = {\n        data: {\n          type: \"profile\",\n          attributes: {\n            name: info.name,\n            email: info.email,\n            profile_image: user.profile_image ?? null,\n          },\n        },\n      };\n    }\n\n    // call api for update\n    await AuthService.updateProfile(JSON.stringify(userData));\n\n    // reset errors\n    setErrors({\n      nameError: false,\n      emailError: false,\n    });\n\n    setNotification({\n      value: true,\n      color: isDemo ? \"secondary\" : \"info\",\n      message: isDemo\n        ? \"You can not update the email in demo version\"\n        : \"Your profile has been updated\",\n    });\n  };\n\n  return (\n    <>\n      <Card id=\"basic-info\" sx={{ overflow: \"visible\" }}>\n        <MDBox p={3}>\n          <MDTypography variant=\"h5\">Basic Info</MDTypography>\n        </MDBox>\n        <MDBox component=\"form\" pb={3} px={3} method=\"POST\" onSubmit={submitHandler}>\n          <Grid container spacing={3}>\n            <Grid item xs={12} sm={6}>\n              <FormField\n                label=\"First Name\"\n                placeholder=\"Alec\"\n                name=\"name\"\n                value={info.name}\n                onChange={changeHandler}\n                error={errors.nameError}\n              />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <FormField\n                label=\"Email\"\n                placeholder=\"example@email.com\"\n                inputProps={{ type: \"email\" }}\n                name=\"email\"\n                value={info.email}\n                onChange={changeHandler}\n                error={errors.emailError}\n              />\n            </Grid>\n          </Grid>\n          <MDBox ml=\"auto\" mt={2} display=\"flex\" justifyContent=\"flex-end\">\n            <MDButton variant=\"gradient\" color=\"dark\" size=\"small\" type=\"submit\">\n              update\n            </MDButton>\n          </MDBox>\n        </MDBox>\n      </Card>\n      {notification.value === true && (\n        <MDAlert color={notification.color} mt=\"20px\">\n          <MDTypography variant=\"body2\" color=\"white\">\n            {notification.message}\n          </MDTypography>\n        </MDAlert>\n      )}\n    </>\n  );\n}\n\nexport default BasicInfo;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}