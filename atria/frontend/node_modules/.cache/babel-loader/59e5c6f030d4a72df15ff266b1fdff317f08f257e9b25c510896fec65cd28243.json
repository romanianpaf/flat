{"ast":null,"code":"/**\n=========================================================\n* Material Dashboard 2 PRO React - v2.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/material-dashboard-pro-react\n* Copyright 2022 Creative Tim (https://www.creative-tim.com)\n\nCoded by www.creative-tim.com\n\n =========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n*/import{useEffect,useState}from\"react\";// @material-ui core components\nimport Card from\"@mui/material/Card\";import Grid from\"@mui/material/Grid\";// Material Dashboard 2 PRO React components\nimport MDBox from\"components/MDBox\";import MDTypography from\"components/MDTypography\";import MDButton from\"components/MDButton\";import MDAlert from\"components/MDAlert\";// Settings page components\nimport FormField from\"layouts/pages/account/components/FormField\";import AuthService from\"services/auth-service\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function BasicInfo(_ref){let{user,isDemo}=_ref;const[info,setInfo]=useState({name:\"\",email:\"\"});const[notification,setNotification]=useState({value:false,color:\"info\",message:\"\"});useEffect(()=>{setInfo({name:user.name,email:user.email});},[user]);useEffect(()=>{if(notification.value===true){let timer=setTimeout(()=>{setNotification({value:false,color:\"info\",message:\"\"});},5000);}},[notification]);const[errors,setErrors]=useState({nameError:false,emailError:false});const changeHandler=e=>{setInfo({...info,[e.target.name]:e.target.value});};const submitHandler=async e=>{e.preventDefault();// validation\nconst mailFormat=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;if(info.name.trim().length===0){setErrors({...errors,nameError:true});return;}if(info.email.trim().length===0||!info.email.trim().match(mailFormat)){setErrors({...errors,emailError:true});return;}// set new user data for call\nlet userData;if(isDemo){var _user$profile_image;userData={data:{type:\"profile\",attributes:{name:info.name,profile_image:(_user$profile_image=user.profile_image)!==null&&_user$profile_image!==void 0?_user$profile_image:null}}};}else{var _user$profile_image2;userData={data:{type:\"profile\",attributes:{name:info.name,email:info.email,profile_image:(_user$profile_image2=user.profile_image)!==null&&_user$profile_image2!==void 0?_user$profile_image2:null}}};}// call api for update\nawait AuthService.updateProfile(JSON.stringify(userData));// reset errors\nsetErrors({nameError:false,emailError:false});setNotification({value:true,color:isDemo?\"secondary\":\"info\",message:isDemo?\"You can not update the email in demo version\":\"Your profile has been updated\"});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Card,{id:\"basic-info\",sx:{overflow:\"visible\"},children:[/*#__PURE__*/_jsx(MDBox,{p:3,children:/*#__PURE__*/_jsx(MDTypography,{variant:\"h5\",children:\"Basic Info\"})}),/*#__PURE__*/_jsxs(MDBox,{component:\"form\",pb:3,px:3,method:\"POST\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(FormField,{label:\"First Name\",placeholder:\"Alec\",name:\"name\",value:info.name,onChange:changeHandler,error:errors.nameError})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(FormField,{label:\"Email\",placeholder:\"example@email.com\",inputProps:{type:\"email\"},name:\"email\",value:info.email,onChange:changeHandler,error:errors.emailError})})]}),/*#__PURE__*/_jsx(MDBox,{ml:\"auto\",mt:2,display:\"flex\",justifyContent:\"flex-end\",children:/*#__PURE__*/_jsx(MDButton,{variant:\"gradient\",color:\"dark\",size:\"small\",type:\"submit\",children:\"update\"})})]})]}),notification.value===true&&/*#__PURE__*/_jsx(MDAlert,{color:notification.color,mt:\"20px\",children:/*#__PURE__*/_jsx(MDTypography,{variant:\"body2\",color:\"white\",children:notification.message})})]});}export default BasicInfo;","map":{"version":3,"names":["useEffect","useState","Card","Grid","MDBox","MDTypography","MDButton","MDAlert","FormField","AuthService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BasicInfo","_ref","user","isDemo","info","setInfo","name","email","notification","setNotification","value","color","message","timer","setTimeout","errors","setErrors","nameError","emailError","changeHandler","e","target","submitHandler","preventDefault","mailFormat","trim","length","match","userData","_user$profile_image","data","type","attributes","profile_image","_user$profile_image2","updateProfile","JSON","stringify","children","id","sx","overflow","p","variant","component","pb","px","method","onSubmit","container","spacing","item","xs","sm","label","placeholder","onChange","error","inputProps","ml","mt","display","justifyContent","size"],"sources":["/home/atria/public_html/f1.atria.live/atria/frontend/src/cruds/user-profile/components/BasicInfo/index.js"],"sourcesContent":["/**\n=========================================================\n* Material Dashboard 2 PRO React - v2.1.0\n=========================================================\n\n* Product Page: https://www.creative-tim.com/product/material-dashboard-pro-react\n* Copyright 2022 Creative Tim (https://www.creative-tim.com)\n\nCoded by www.creative-tim.com\n\n =========================================================\n\n* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n*/\n\nimport { useEffect, useState } from \"react\";\n\n// @material-ui core components\nimport Card from \"@mui/material/Card\";\nimport Grid from \"@mui/material/Grid\";\n\n// Material Dashboard 2 PRO React components\nimport MDBox from \"components/MDBox\";\nimport MDTypography from \"components/MDTypography\";\nimport MDButton from \"components/MDButton\";\nimport MDAlert from \"components/MDAlert\";\n\n// Settings page components\nimport FormField from \"layouts/pages/account/components/FormField\";\n\nimport AuthService from \"services/auth-service\";\n\nfunction BasicInfo({ user, isDemo }) {\n  const [info, setInfo] = useState({ name: \"\", email: \"\" });\n  const [notification, setNotification] = useState({ value: false, color: \"info\", message: \"\" });\n\n  useEffect(() => {\n    setInfo({\n      name: user.name,\n      email: user.email,\n    });\n  }, [user]);\n\n  useEffect(() => {\n    if (notification.value === true) {\n      let timer = setTimeout(() => {\n        setNotification({ value: false, color: \"info\", message: \"\" });\n      }, 5000);\n    }\n  }, [notification]);\n\n  const [errors, setErrors] = useState({\n    nameError: false,\n    emailError: false,\n  });\n\n  const changeHandler = (e) => {\n    setInfo({\n      ...info,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const submitHandler = async (e) => {\n    e.preventDefault();\n\n    // validation\n    const mailFormat = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\n    if (info.name.trim().length === 0) {\n      setErrors({ ...errors, nameError: true });\n      return;\n    }\n\n    if (info.email.trim().length === 0 || !info.email.trim().match(mailFormat)) {\n      setErrors({ ...errors, emailError: true });\n      return;\n    }\n\n    // set new user data for call\n    let userData;\n    if (isDemo) {\n      userData = {\n        data: {\n          type: \"profile\",\n          attributes: {\n            name: info.name,\n            profile_image: user.profile_image ?? null,\n          },\n        },\n      };\n    } else {\n      userData = {\n        data: {\n          type: \"profile\",\n          attributes: {\n            name: info.name,\n            email: info.email,\n            profile_image: user.profile_image ?? null,\n          },\n        },\n      };\n    }\n\n    // call api for update\n    await AuthService.updateProfile(JSON.stringify(userData));\n\n    // reset errors\n    setErrors({\n      nameError: false,\n      emailError: false,\n    });\n\n    setNotification({\n      value: true,\n      color: isDemo ? \"secondary\" : \"info\",\n      message: isDemo\n        ? \"You can not update the email in demo version\"\n        : \"Your profile has been updated\",\n    });\n  };\n\n  return (\n    <>\n      <Card id=\"basic-info\" sx={{ overflow: \"visible\" }}>\n        <MDBox p={3}>\n          <MDTypography variant=\"h5\">Basic Info</MDTypography>\n        </MDBox>\n        <MDBox component=\"form\" pb={3} px={3} method=\"POST\" onSubmit={submitHandler}>\n          <Grid container spacing={3}>\n            <Grid item xs={12} sm={6}>\n              <FormField\n                label=\"First Name\"\n                placeholder=\"Alec\"\n                name=\"name\"\n                value={info.name}\n                onChange={changeHandler}\n                error={errors.nameError}\n              />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <FormField\n                label=\"Email\"\n                placeholder=\"example@email.com\"\n                inputProps={{ type: \"email\" }}\n                name=\"email\"\n                value={info.email}\n                onChange={changeHandler}\n                error={errors.emailError}\n              />\n            </Grid>\n          </Grid>\n          <MDBox ml=\"auto\" mt={2} display=\"flex\" justifyContent=\"flex-end\">\n            <MDButton variant=\"gradient\" color=\"dark\" size=\"small\" type=\"submit\">\n              update\n            </MDButton>\n          </MDBox>\n        </MDBox>\n      </Card>\n      {notification.value === true && (\n        <MDAlert color={notification.color} mt=\"20px\">\n          <MDTypography variant=\"body2\" color=\"white\">\n            {notification.message}\n          </MDTypography>\n        </MDAlert>\n      )}\n    </>\n  );\n}\n\nexport default BasicInfo;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}