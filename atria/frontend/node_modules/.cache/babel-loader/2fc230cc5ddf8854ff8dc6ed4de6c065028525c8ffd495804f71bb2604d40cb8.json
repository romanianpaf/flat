{"ast":null,"code":"import HttpService from\"./http.service\";export const setupAxiosInterceptors=onUnauthenticated=>{const onRequestSuccess=async config=>{const token=localStorage.getItem(\"token\");config.headers.Authorization=`Bearer ${token}`;return config;};const onRequestFail=error=>Promise.reject(error);HttpService.addRequestInterceptor(onRequestSuccess,onRequestFail);const onResponseSuccess=response=>response;const onResponseFail=error=>{const status=error.status||error.response.status;if(status===403||status===401){onUnauthenticated();}return Promise.reject(error);};HttpService.addResponseInterceptor(onResponseSuccess,onResponseFail);};","map":{"version":3,"names":["HttpService","setupAxiosInterceptors","onUnauthenticated","onRequestSuccess","config","token","localStorage","getItem","headers","Authorization","onRequestFail","error","Promise","reject","addRequestInterceptor","onResponseSuccess","response","onResponseFail","status","addResponseInterceptor"],"sources":["/home/atria/public_html/f1.atria.live/atria/frontend/src/services/interceptor.js"],"sourcesContent":["import HttpService from \"./http.service\";\n\nexport const setupAxiosInterceptors = (onUnauthenticated) => {\n  const onRequestSuccess = async (config) => {\n    const token = localStorage.getItem(\"token\");\n    config.headers.Authorization = `Bearer ${token}`;\n    return config;\n  };\n  const onRequestFail = (error) => Promise.reject(error);\n\n  HttpService.addRequestInterceptor(onRequestSuccess, onRequestFail);\n\n  const onResponseSuccess = (response) => response;\n\n  const onResponseFail = (error) => {\n    const status = error.status || error.response.status;\n    if (status === 403 || status === 401) {\n      onUnauthenticated();\n    }\n\n    return Promise.reject(error);\n  };\n  HttpService.addResponseInterceptor(onResponseSuccess, onResponseFail);\n};\n"],"mappings":"AAAA,MAAO,CAAAA,WAAW,KAAM,gBAAgB,CAExC,MAAO,MAAM,CAAAC,sBAAsB,CAAIC,iBAAiB,EAAK,CAC3D,KAAM,CAAAC,gBAAgB,CAAG,KAAO,CAAAC,MAAM,EAAK,CACzC,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3CH,MAAM,CAACI,OAAO,CAACC,aAAa,CAAI,UAASJ,KAAM,EAAC,CAChD,MAAO,CAAAD,MAAM,CACf,CAAC,CACD,KAAM,CAAAM,aAAa,CAAIC,KAAK,EAAKC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAEtDX,WAAW,CAACc,qBAAqB,CAACX,gBAAgB,CAAEO,aAAa,CAAC,CAElE,KAAM,CAAAK,iBAAiB,CAAIC,QAAQ,EAAKA,QAAQ,CAEhD,KAAM,CAAAC,cAAc,CAAIN,KAAK,EAAK,CAChC,KAAM,CAAAO,MAAM,CAAGP,KAAK,CAACO,MAAM,EAAIP,KAAK,CAACK,QAAQ,CAACE,MAAM,CACpD,GAAIA,MAAM,GAAK,GAAG,EAAIA,MAAM,GAAK,GAAG,CAAE,CACpChB,iBAAiB,CAAC,CAAC,CACrB,CAEA,MAAO,CAAAU,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CAAC,CACDX,WAAW,CAACmB,sBAAsB,CAACJ,iBAAiB,CAAEE,cAAc,CAAC,CACvE,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}