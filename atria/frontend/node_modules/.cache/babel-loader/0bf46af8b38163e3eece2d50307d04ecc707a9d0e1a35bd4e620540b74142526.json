{"ast":null,"code":"import _slicedToArray from \"/home/atria/public_html/f1.atria.live/atria/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _classCallCheck from \"/home/atria/public_html/f1.atria.live/atria/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/atria/public_html/f1.atria.live/atria/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/atria/public_html/f1.atria.live/atria/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/atria/public_html/f1.atria.live/atria/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport t, { PureComponent as i, createElement as n } from \"react\";\nvar s = function s() {};\nvar e = /*#__PURE__*/function (_i) {\n  _inherits(e, _i);\n  var _super = _createSuper(e);\n  function e() {\n    var _this;\n    _classCallCheck(this, e);\n    for (var _len = arguments.length, t = new Array(_len), _key = 0; _key < _len; _key++) {\n      t[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(t));\n    _this.t = false;\n    _this.i = null;\n    _this.o = s;\n    return _this;\n  }\n  _createClass(e, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.o();\n    }\n  }, {\n    key: \"u\",\n    value: function u(t) {\n      var _this2 = this;\n      if (t === this.i) return;\n      this.o();\n      this.i = null;\n      if (t) {\n        this.i = t;\n        this.o = t.on(\"updated\", function () {\n          return _this2.forceUpdate();\n        });\n      }\n    }\n  }, {\n    key: \"allowed\",\n    get: function get() {\n      return this.t;\n    }\n  }, {\n    key: \"h\",\n    value: function h() {\n      var t = this.props;\n      var i = t.of || t.a || t.an || t.this || t.on;\n      var n = t.not ? \"cannot\" : \"can\";\n      return t.ability[n](t.I || t.do, i, t.field);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.u(this.props.ability);\n      this.t = this.h();\n      return this.props.passThrough || this.t ? this.l() : null;\n    }\n  }, {\n    key: \"l\",\n    value: function l() {\n      var _this$props = this.props,\n        t = _this$props.children,\n        i = _this$props.ability;\n      var n = \"function\" === typeof t ? t(this.t, i) : t;\n      return n;\n    }\n  }]);\n  return e;\n}(i);\nfunction r(t) {\n  var i, n;\n  return n = i = /*#__PURE__*/function (_e) {\n    _inherits(i, _e);\n    var _super2 = _createSuper(i);\n    function i() {\n      _classCallCheck(this, i);\n      return _super2.apply(this, arguments);\n    }\n    return _createClass(i);\n  }(e), i.defaultProps = {\n    ability: t\n  }, n;\n}\nfunction o(t) {\n  return function (i) {\n    return n(t, {\n      children: function children(t) {\n        return n(e, Object.assign({\n          ability: t\n        }, i));\n      }\n    });\n  };\n}\nfunction useAbility(i) {\n  if (\"production\" !== process.env.NODE_ENV && \"function\" !== typeof t.useContext) throw new Error(\"You must use React >= 16.8 in order to use useAbility()\");\n  var n = t.useContext(i);\n  var _t$useState = t.useState(),\n    _t$useState2 = _slicedToArray(_t$useState, 2),\n    s = _t$useState2[0],\n    e = _t$useState2[1];\n  t.useEffect(function () {\n    return n.on(\"updated\", function (t) {\n      if (t.rules !== s) e(t.rules);\n    });\n  }, []);\n  return n;\n}\nexport { e as Can, r as createCanBoundTo, o as createContextualCan, useAbility };","map":{"version":3,"names":["s","e","_i","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","t","Array","_key","call","apply","concat","i","o","_createClass","key","value","componentWillUnmount","u","_this2","on","forceUpdate","get","h","props","of","a","an","this","n","not","ability","I","do","field","render","passThrough","l","_this$props","children","r","_e","_super2","defaultProps","Object","assign","useAbility","process","env","NODE_ENV","useContext","Error","_t$useState","useState","_t$useState2","_slicedToArray","useEffect","rules","Can","createCanBoundTo","createContextualCan"],"sources":["/home/atria/public_html/f1.atria.live/atria/frontend/node_modules/@casl/react/src/Can.ts","/home/atria/public_html/f1.atria.live/atria/frontend/node_modules/@casl/react/src/factory.ts","/home/atria/public_html/f1.atria.live/atria/frontend/node_modules/@casl/react/src/hooks/useAbility.ts"],"sourcesContent":["import { PureComponent, ReactNode } from 'react';\nimport {\n  Unsubscribe,\n  AbilityTuple,\n  SubjectType,\n  AnyAbility,\n  Generics,\n  Abilities,\n  IfString,\n} from '@casl/ability';\n\nconst noop = () => {};\n\ntype AbilityCanProps<\n  T extends Abilities,\n  Else = IfString<T, { do: T } | { I: T }>\n> = T extends AbilityTuple\n  ? { do: T[0], on: T[1], field?: string } |\n  { I: T[0], a: Extract<T[1], SubjectType>, field?: string } |\n  { I: T[0], an: Extract<T[1], SubjectType>, field?: string } |\n  { I: T[0], this: Exclude<T[1], SubjectType>, field?: string }\n  : Else;\n\ninterface ExtraProps {\n  not?: boolean\n  passThrough?: boolean\n}\n\ninterface CanExtraProps<T extends AnyAbility> extends ExtraProps {\n  ability: T\n  children: ReactNode | ((isAllowed: boolean, ability: T) => ReactNode)\n}\n\ninterface BoundCanExtraProps<T extends AnyAbility> extends ExtraProps {\n  ability?: T\n  children: ReactNode | ((isAllowed: boolean, ability: T) => ReactNode)\n}\n\nexport type CanProps<T extends AnyAbility> =\n  AbilityCanProps<Generics<T>['abilities']> & CanExtraProps<T>;\nexport type BoundCanProps<T extends AnyAbility> =\n  AbilityCanProps<Generics<T>['abilities']> & BoundCanExtraProps<T>;\n\nexport class Can<\n  T extends AnyAbility,\n  IsBound extends boolean = false\n> extends PureComponent<IsBound extends true ? BoundCanProps<T> : CanProps<T>> {\n  private _isAllowed: boolean = false;\n  private _ability: T | null = null;\n  private _unsubscribeFromAbility: Unsubscribe = noop;\n\n  componentWillUnmount() {\n    this._unsubscribeFromAbility();\n  }\n\n  private _connectToAbility(ability?: T) {\n    if (ability === this._ability) {\n      return;\n    }\n\n    this._unsubscribeFromAbility();\n    this._ability = null;\n\n    if (ability) {\n      this._ability = ability;\n      this._unsubscribeFromAbility = ability.on('updated', () => this.forceUpdate());\n    }\n  }\n\n  get allowed() {\n    return this._isAllowed;\n  }\n\n  private _canRender(): boolean {\n    const props: any = this.props;\n    const subject = props.of || props.a || props.an || props.this || props.on;\n    const can = props.not ? 'cannot' : 'can';\n\n    return props.ability[can](props.I || props.do, subject, props.field);\n  }\n\n  render() {\n    this._connectToAbility(this.props.ability);\n    this._isAllowed = this._canRender();\n    return this.props.passThrough || this._isAllowed ? this._renderChildren() : null;\n  }\n\n  private _renderChildren() {\n    const { children, ability } = this.props;\n    const elements = typeof children === 'function'\n      ? children(this._isAllowed, ability as any)\n      : children;\n\n    return elements as ReactNode;\n  }\n}\n","import { createElement as h, ComponentClass, Consumer, FunctionComponent } from 'react';\nimport { AnyAbility } from '@casl/ability';\nimport { Can, BoundCanProps } from './Can';\n\ninterface BoundCanClass<T extends AnyAbility> extends ComponentClass<BoundCanProps<T>> {\n  new (props: BoundCanProps<T>, context?: any): Can<T, true>\n}\n\nexport function createCanBoundTo<T extends AnyAbility>(ability: T): BoundCanClass<T> {\n  return class extends Can<T, true> {\n    static defaultProps = { ability } as BoundCanClass<T>['defaultProps'];\n  };\n}\n\nexport function createContextualCan<T extends AnyAbility>(\n  Getter: Consumer<T>\n): FunctionComponent<BoundCanProps<T>> {\n  return (props: BoundCanProps<T>) => h(Getter, {\n    children: (ability: T) => h(Can, {\n      ability,\n      ...props,\n    } as any)\n  });\n}\n","import React from 'react';\nimport { AnyAbility } from '@casl/ability';\n\nexport function useAbility<T extends AnyAbility>(context: React.Context<T>): T {\n  if (process.env.NODE_ENV !== 'production' && typeof React.useContext !== 'function') {\n    /* istanbul ignore next */\n    throw new Error('You must use React >= 16.8 in order to use useAbility()');\n  }\n\n  const ability = React.useContext<T>(context);\n  const [rules, setRules] = React.useState<T['rules']>();\n\n  React.useEffect(() => ability.on('updated', (event) => {\n    if (event.rules !== rules) {\n      setRules(event.rules);\n    }\n  }), []);\n\n  return ability;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}