{"ast":null,"code":"import _regeneratorRuntime from\"/home/atria/public_html/f1.atria.live/atria/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/atria/public_html/f1.atria.live/atria/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import HttpService from\"./http.service\";export var setupAxiosInterceptors=function setupAxiosInterceptors(onUnauthenticated){var onRequestSuccess=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(config){var token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:token=localStorage.getItem(\"token\");config.headers.Authorization=\"Bearer \".concat(token);return _context.abrupt(\"return\",config);case 3:case\"end\":return _context.stop();}},_callee);}));return function onRequestSuccess(_x){return _ref.apply(this,arguments);};}();var onRequestFail=function onRequestFail(error){return Promise.reject(error);};HttpService.addRequestInterceptor(onRequestSuccess,onRequestFail);var onResponseSuccess=function onResponseSuccess(response){return response;};var onResponseFail=function onResponseFail(error){var status=error.status||error.response.status;if(status===403||status===401){onUnauthenticated();}return Promise.reject(error);};HttpService.addResponseInterceptor(onResponseSuccess,onResponseFail);};","map":{"version":3,"names":["HttpService","setupAxiosInterceptors","onUnauthenticated","onRequestSuccess","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","config","token","wrap","_callee$","_context","prev","next","localStorage","getItem","headers","Authorization","concat","abrupt","stop","_x","apply","arguments","onRequestFail","error","Promise","reject","addRequestInterceptor","onResponseSuccess","response","onResponseFail","status","addResponseInterceptor"],"sources":["/home/atria/public_html/f1.atria.live/atria/frontend/src/services/interceptor.js"],"sourcesContent":["import HttpService from \"./http.service\";\n\nexport const setupAxiosInterceptors = (onUnauthenticated) => {\n  const onRequestSuccess = async (config) => {\n    const token = localStorage.getItem(\"token\");\n    config.headers.Authorization = `Bearer ${token}`;\n    return config;\n  };\n  const onRequestFail = (error) => Promise.reject(error);\n\n  HttpService.addRequestInterceptor(onRequestSuccess, onRequestFail);\n\n  const onResponseSuccess = (response) => response;\n\n  const onResponseFail = (error) => {\n    const status = error.status || error.response.status;\n    if (status === 403 || status === 401) {\n      onUnauthenticated();\n    }\n\n    return Promise.reject(error);\n  };\n  HttpService.addResponseInterceptor(onResponseSuccess, onResponseFail);\n};\n"],"mappings":"oSAAA,MAAO,CAAAA,WAAW,KAAM,gBAAgB,CAExC,MAAO,IAAM,CAAAC,sBAAsB,CAAG,QAAzB,CAAAA,sBAAsBA,CAAIC,iBAAiB,CAAK,CAC3D,GAAM,CAAAC,gBAAgB,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,MAAM,MAAAC,KAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAC9BL,KAAK,CAAGM,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3CR,MAAM,CAACS,OAAO,CAACC,aAAa,WAAAC,MAAA,CAAaV,KAAK,CAAE,CAAC,OAAAG,QAAA,CAAAQ,MAAA,UAC1CZ,MAAM,0BAAAI,QAAA,CAAAS,IAAA,MAAAd,OAAA,GACd,kBAJK,CAAAL,gBAAgBA,CAAAoB,EAAA,SAAAnB,IAAA,CAAAoB,KAAA,MAAAC,SAAA,OAIrB,CACD,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,KAAK,QAAK,CAAAC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,GAEtD3B,WAAW,CAAC8B,qBAAqB,CAAC3B,gBAAgB,CAAEuB,aAAa,CAAC,CAElE,GAAM,CAAAK,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAAIC,QAAQ,QAAK,CAAAA,QAAQ,GAEhD,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAIN,KAAK,CAAK,CAChC,GAAM,CAAAO,MAAM,CAAGP,KAAK,CAACO,MAAM,EAAIP,KAAK,CAACK,QAAQ,CAACE,MAAM,CACpD,GAAIA,MAAM,GAAK,GAAG,EAAIA,MAAM,GAAK,GAAG,CAAE,CACpChC,iBAAiB,CAAC,CAAC,CACrB,CAEA,MAAO,CAAA0B,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC9B,CAAC,CACD3B,WAAW,CAACmC,sBAAsB,CAACJ,iBAAiB,CAAEE,cAAc,CAAC,CACvE,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}